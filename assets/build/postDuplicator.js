(()=>{"use strict";document.addEventListener("DOMContentLoaded",(function(){document.body.addEventListener("click",(function(t){if(t.target.classList.contains("m4c-duplicate-post")){t.preventDefault();const e=t.target.nextElementSibling;e&&e.classList.contains("spinner")&&(e.style.visibility="visible");const n={original_id:t.target.getAttribute("data-postid")};fetch(`${postDuplicatorVars.restUrl}duplicate-post`,{method:"POST",headers:{"X-WP-Nonce":postDuplicatorVars.nonce,"Content-Type":"application/json"},body:JSON.stringify(n)}).then((t=>t.ok?t.json():t.json().then((t=>{throw t})))).then((t=>{if(t.duplicate_id){let e=window.location.href;e.includes("?")?e+=`&post-duplicated=${t.duplicate_id}`:e+=`?post-duplicated=${t.duplicate_id}`,window.location.href=e}})).catch((t=>{console.error("Error duplicating post:",t.message),function(t,e="error"){const n=document.createElement("div");n.classList.add("my-snackbar",`my-snackbar--${e}`),n.textContent=t,document.body.appendChild(n),setTimeout((()=>{n.classList.add("my-snackbar--hide"),n.addEventListener("transitionend",(()=>n.remove()))}),3e3)}(`Error duplicating post: ${t.message}`,"error")}))}}))}))})();